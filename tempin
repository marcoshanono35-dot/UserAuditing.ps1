$acclist = @("athena","ajohnson","achi","anguyen","kliu","jsmith","dgonzalez","krbtgt", "DefaultAccount", "Guest", "WDAGUtilityAccount") | ForEach-Object { $_.Trim().ToLower() }

# Get all AD users (enabled or disabled), convert names to lowercase
$acc = Get-ADUser -Filter * -Properties SamAccountName |
        Select-Object -ExpandProperty SamAccountName |
        ForEach-Object { $_.Trim().ToLower() }

foreach ($user in $acc) {
    if ($user -notin $acclist) {
        Disable-ADAccount -Identity $user
        Write-Host "Disabled AD account: $user"
    }
}


# Get all users in Domain Admins and Enterprise Admins groups
$admins = Get-ADGroupMember "Domain Admins","Enterprise Admins" -Recursive |
          Where-Object { $_.ObjectClass -eq "user" } |
          Select Name, SamAccountName, Enabled

# Show results
$admins


